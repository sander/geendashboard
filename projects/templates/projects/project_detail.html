{% extends 'base.html' %}

{% block content %}
  <nav>
    <p><a href="{% url 'project-list' %}">Back to project list</a></p>
  </nav>
  <article>
    <h1>Project: {{ project.name }}</h1>
    <p>{{ project.goal }}</p>
    <p>Start: {{ project.start }}</p>
    <p>End: {{ project.end }}</p>
    <p>Due: {{ project.due }}</p>
    <p><a href="{% url 'wunderlist-attach' slug=project.slug %}">[+ Attach new Wunderlist]</a></p>
    {% if project.tasklist %}
      <form action="{% url 'wunderlist-attach' slug=project.slug %}" method="POST">
        {% csrf_token %}
        <p>
          <input type="hidden" name="list" value="{{ project.tasklist.wunderlist_id }}">
          <button>Refresh current Wunderlist</button>
        </p>
      </form>
    {% endif %}

    {% if project.tasklist %}
      <h2>Tasks</h2>
      <ul>
        {% for task in project.tasklist.get_tasks %}
          <li>
            <input type="checkbox" disabled {% if task.completed_by_id %}checked{% endif %}>
            {{ task.title }}
          </li>
        {% endfor %}
      </ul>
    {% endif %}

  </article>
{% endblock %}
